<configuration xmlns="urn:nis.vt.edu:configurator:1.0">
  <property name="orderType">
    <select>
      <choice name="service">
        <section name="section.service">
          <property name="service.type">
            <select>
              <choice name="voice">
                <section name="section.service.voice">
                  <property name="service.voice.application">
                    <select>
                      <choice name="ip" />
                      <choice name="digital" />
                      <choice name="analog" />
                    </select>
                  </property>
                  <property name="service.voice.location">
                    <text />
                  </property>
                  <property name="service.voice.callingPrivilege">
                    <select>
                      <choice name="domestic" />
                      <choice name="international" />
                    </select>
                  </property>
                </section>
              </choice>
              <choice name="data" />
              <choice name="video" />
            </select>
          </property>
        </section>
      </choice>
      <choice name="product">
        <section name="section.product">
          <property name="product.type">
            <select>
              <choice name="phone">
                <section name="section.product.phone">
                  <property name="product.phone.model">
                    <select>
                      <choice name="ipStandard"/>
                      <choice name="ipExecutive"/>
                      <choice name="digital"/>
                      <choice name="analog"/>
                    </select>
                  </property>
                </section>                
              </choice>
              <choice name="wagon"/>
            </select>
          </property>
        </section>
      </choice>
    </select>
  </property>
  
   <when>
     <predicate>
     	context.service.voice.application == "ip"
     </predicate>
     <action>
       <with name="model" ref="product.phone.model">
         ipStandard.enabled = true
         ipEnhanced.enabled = true
         digital.enabled = false
         analog.enabled = false
       </with>
     </action>
   </when>  

   <when>
     <predicate>
     	context.service.voice.application == "digital"
     </predicate>
     <action>
       <with name="model" ref="product.phone.model">
         ipStandard.enabled = false
         ipEnhanced.enabled = false
         digital.enabled = true
         analog.enabled = false
       </with>
     </action>
   </when>  
   
</configuration>